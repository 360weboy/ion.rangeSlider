// Ion.RangeSlider
// version 1.5.93
// http://ionden.com/a/plugins/ion.rangeSlider/
(function(c){var P=0,s=function(c){return c.toString().replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1 ")},l={init:function(d){var b=c.extend({min:10,max:100,from:10,to:100,type:"single",step:1,postfix:"",onChange:null,onFinish:null},d),p='<span class="irs">',p=p+'<span class="irs-line"><span class="irs-line-left"></span><span class="irs-line-mid"></span><span class="irs-line-right"></span></span>',p=p+'<span class="irs-min">0</span><span class="irs-max">1</span>',p=p+'<span class="irs-from">0</span><span class="irs-to">0</span><span class="irs-single">0</span>',
p=p+"</span>",B='<span class="irs-diapason"></span>',B=B+'<span class="irs-slider from"></span>',B=B+'<span class="irs-slider to"></span>',z;d=navigator.userAgent;var l=/msie\s\d+/i;0<d.search(l)?(d=l.exec(d).toString(),d=d.split(" ")[1],z=9>d?!0:!1):z=!1;var C;try{document.createEvent("TouchEvent"),C=!0}catch(X){C=!1}return this.each(function(){var j=c(this);if(!j.data("isActive")){j.data("isActive",!0);P++;this.pluginCount=P;var d={min:parseInt(j.attr("value").split(";")[0])||b.min,max:parseInt(j.attr("value").split(";")[1])||
b.max,from:parseInt(j.data("from"))||parseInt(j.attr("value").split(";")[0])||b.from,to:parseInt(j.data("to"))||parseInt(j.attr("value").split(";")[1])||b.to,type:j.data("type")||b.type,step:parseInt(j.data("step"))||b.step,postfix:j.data("postfix")||b.postfix};b=c.extend(b,d);d='<span class="irs" id="irs-'+this.pluginCount+'"></span>';j[0].style.display="none";j.before(d);var l=c("#irs-"+this.pluginCount),Q=c(document.body),R=c(window),e,D,E,v,w,q,t,f,n,r,M,m=!1,x=!1,g={},N=0,H=0,I=0,k=0,y=0,F=0,
O=0,J=0,K=0,S=0;this.updateData=function(a){b=c.extend(b,a);l.find("*").off();l.html("");T()};this.removeSlider=function(){l.find("*").off();l.html("").remove();j.data("isActive",!1);j.show()};var T=function(){l.html(p);e=l.find(".irs");D=e.find(".irs-min");E=e.find(".irs-max");D.html(s(b.min)+b.postfix);E.html(s(b.max)+b.postfix);v=e.find(".irs-from");w=e.find(".irs-to");q=e.find(".irs-single");H=D.outerWidth();I=E.outerWidth();if("single"===b.type){if(e.append('<span class="irs-slider single"></span>'),
t=e.find(".single"),t.on("mousedown",function(a){a.preventDefault();a.stopPropagation();A(a,c(this),null);m=!0;z&&c("*").prop("unselectable",!0)}),C)t.on("touchstart",function(a){a.preventDefault();a.stopPropagation();A(a.originalEvent,c(this),null);m=!0})}else"double"===b.type&&(e.append(B),f=e.find(".from"),n=e.find(".to"),M=e.find(".irs-diapason"),G(),f.on("mousedown",function(a){a.preventDefault();a.stopPropagation();c(this).addClass("last");n.removeClass("last");A(a,c(this),"from");x=m=!0;z&&
c("*").prop("unselectable",!0)}),n.on("mousedown",function(a){a.preventDefault();a.stopPropagation();c(this).addClass("last");f.removeClass("last");A(a,c(this),"to");x=m=!0;z&&c("*").prop("unselectable",!0)}),C&&(f.on("touchstart",function(a){a.preventDefault();a.stopPropagation();c(this).addClass("last");n.removeClass("last");A(a.originalEvent,c(this),"from");x=m=!0}),n.on("touchstart",function(a){a.preventDefault();a.stopPropagation();c(this).addClass("last");f.removeClass("last");A(a.originalEvent,
c(this),"to");x=m=!0})));Q.on("mouseup",function(){m&&(m=x=!1,r.removeAttr("id"),r=null,"double"===b.type&&G(),L(),z&&c("*").prop("unselectable",!1))});Q.on("mousemove",function(a){m&&(N=a.pageX,U())});C&&(R.on("touchend",function(){m&&(m=x=!1,r.removeAttr("id"),r=null,"double"===b.type&&G(),L())}),R.on("touchmove",function(a){m&&(N=a.originalEvent.pageX,U())}));V();var a={fromNumber:b.from,toNumber:b.to,fromPers:0,toPers:0,fromX:0,toX:0},u=b.max-b.min;"single"===b.type?(a.fromPers=100*((a.fromNumber-
b.min)/u),a.fromX=Math.round(y/100*a.fromPers),t[0].style.left=a.fromX+"px"):"double"===b.type&&(a.fromPers=100*((a.fromNumber-b.min)/u),a.fromX=Math.round(y/100*a.fromPers),f[0].style.left=a.fromX+"px",a.toPers=100*((a.toNumber-b.min)/u),a.toX=Math.round(y/100*a.toPers),n[0].style.left=a.toX+"px",G());g=a;W()},V=function(){k=e.width();F=t?t.width():f.width();y=k-F},A=function(a,u,c){V();r=u;r.attr("id","irs-active-slider");u=r.offset().left;S=u+(a.pageX-u)-r.position().left;"single"===b.type?O=e.width()-
F:"double"===b.type&&("from"===c?(J=0,K=parseInt(n.css("left"))):(J=parseInt(f.css("left")),K=e.width()-F))},G=function(){var a=f.width(),b=parseInt(f[0].style.left)||f.position().left,c=(parseInt(n[0].style.left)||n.position().left)-b;M[0].style.left=b+a/2+"px";M[0].style.width=c+"px"},U=function(){var a=Math.round(N-S);"single"===b.type?(0>a&&(a=0),a>O&&(a=O),L()):"double"===b.type&&(a<J&&(a=J),a>K&&(a=K),L(),G());r[0].style.left=a+"px"},L=function(){var a={fromNumber:0,toNumber:0,fromPers:0,toPers:0,
fromX:0,toX:0},c=b.max-b.min,d;"single"===b.type?(a.fromX=parseInt(t[0].style.left)||t.position().left,a.fromPers=100*(a.fromX/y),d=c/100*a.fromPers+parseInt(b.min),a.fromNumber=Math.round(d/b.step)*b.step):"double"===b.type&&(a.fromX=parseInt(f[0].style.left)||f.position().left,a.fromPers=100*(a.fromX/y),d=c/100*a.fromPers+parseInt(b.min),a.fromNumber=Math.round(d/b.step)*b.step,a.toX=parseInt(n[0].style.left)||n.position().left,a.toPers=100*(a.toX/y),c=c/100*a.toPers+parseInt(b.min),a.toNumber=
Math.round(c/b.step)*b.step);g=a;W()},W=function(){var a,c,d,e,f,h;h=F/2;"single"===b.type?(v[0].style.display="none",w[0].style.display="none",d=s(g.fromNumber)+b.postfix,q.html(d),f=q.outerWidth(),h=g.fromX-f/2+h,0>h&&(h=0),h>k-f&&(h=k-f),q[0].style.left=h+"px",D[0].style.display=h<H?"none":"block",E[0].style.display=h+f>k-I?"none":"block",j.attr("value",parseInt(g.fromNumber))):"double"===b.type&&(a=s(g.fromNumber)+b.postfix,c=s(g.toNumber)+b.postfix,d=g.fromNumber!=g.toNumber?s(g.fromNumber)+
" \u2014 "+s(g.toNumber)+b.postfix:s(g.fromNumber)+b.postfix,v.html(a),w.html(c),q.html(d),a=v.outerWidth(),c=g.fromX-a/2+h,0>c&&(c=0),c>k-a&&(c=k-a),v[0].style.left=c+"px",d=w.outerWidth(),e=g.toX-d/2+h,0>e&&(e=0),e>k-d&&(e=k-d),w[0].style.left=e+"px",f=q.outerWidth(),h=g.fromX+(g.toX-g.fromX)/2-f/2+h,0>h&&(h=0),h>k-f&&(h=k-f),q[0].style.left=h+"px",c+a<e?(q[0].style.display="none",v[0].style.display="block",w[0].style.display="block"):(q[0].style.display="block",v[0].style.display="none",w[0].style.display=
"none"),D[0].style.display=h<H||c<H?"none":"block",E[0].style.display=h+f>k-I||e+d>k-I?"none":"block",j.attr("value",parseInt(g.fromNumber)+";"+parseInt(g.toNumber)));"function"==typeof b.onChange&&b.onChange.call(this,g);"function"==typeof b.onFinish&&!1===x&&b.onFinish.call(this,g)};T()}})},update:function(c){return this.each(function(){this.updateData(c)})},remove:function(){return this.each(function(){this.removeSlider()})}};c.fn.ionRangeSlider=function(d){if(l[d])return l[d].apply(this,Array.prototype.slice.call(arguments,
1));if("object"===typeof d||!d)return l.init.apply(this,arguments);c.error("\u041c\u0435\u0442\u043e\u0434 \u0441 \u0438\u043c\u0435\u043d\u0435\u043c "+d+" \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0434\u043b\u044f jQuery.ionRangeSlider")}})(jQuery);