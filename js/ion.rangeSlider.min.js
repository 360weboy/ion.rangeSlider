// Ion.RangeSlider
// version 1.6.107
// http://ionden.com/a/plugins/ion.rangeSlider/
(function(c){var T=0,s=function(c){return c.toString().replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1 ")},B;var k=navigator.userAgent,F=/msie\s\d+/i;0<k.search(F)?(k=F.exec(k).toString(),k=k.split(" ")[1],B=9>k?!0:!1):B=!1;var G;try{document.createEvent("TouchEvent"),G=!0}catch($){G=!1}var D={init:function(E){var b=c.extend({min:10,max:100,from:10,to:100,type:"single",step:1,postfix:"",hasGrid:!1,onChange:null,onFinish:null},E),p='<span class="irs">',p=p+'<span class="irs-line"><span class="irs-line-left"></span><span class="irs-line-mid"></span><span class="irs-line-right"></span></span>',
p=p+'<span class="irs-min">0</span><span class="irs-max">1</span>',p=p+'<span class="irs-from">0</span><span class="irs-to">0</span><span class="irs-single">0</span>',p=p+"</span>",p=p+'<span class="irs-grid"></span>',k='<span class="irs-diapason"></span>',k=k+'<span class="irs-slider from"></span>',k=k+'<span class="irs-slider to"></span>';return this.each(function(){var l=c(this);if(!l.data("isActive")){l.data("isActive",!0);T++;this.pluginCount=T;var E={min:parseInt(l.attr("value").split(";")[0])||
b.min,max:parseInt(l.attr("value").split(";")[1])||b.max,from:parseInt(l.data("from"))||b.from,to:parseInt(l.data("to"))||b.to,type:l.data("type")||b.type,step:parseInt(l.data("step"))||b.step,postfix:l.data("postfix")||b.postfix,hasGrid:l.data("hasgrid")||b.hasGrid};b=c.extend(b,E);E='<span class="irs" id="irs-'+this.pluginCount+'"></span>';l[0].style.display="none";l.before(E);var v=c("#irs-"+this.pluginCount),D=c(document.body),F=c(window),f,H,I,x,y,t,w,m,q,u,Q,U,n=!1,z=!1,g={},R=0,L=0,M=0,j=0,
A=0,J=0,S=0,N=0,O=0,V=0;this.updateData=function(a){b=c.extend(b,a);v.find("*").off();v.html("");W()};this.removeSlider=function(){v.find("*").off();v.html("").remove();l.data("isActive",!1);l.show()};var W=function(){v.html(p);f=v.find(".irs");H=f.find(".irs-min");I=f.find(".irs-max");H.html(s(b.min)+b.postfix);I.html(s(b.max)+b.postfix);x=f.find(".irs-from");y=f.find(".irs-to");t=f.find(".irs-single");U=v.find(".irs-grid");L=H.outerWidth();M=I.outerWidth();if("single"===b.type){if(f.append('<span class="irs-slider single"></span>'),
w=f.find(".single"),w.on("mousedown",function(a){a.preventDefault();a.stopPropagation();C(a,c(this),null);n=!0;B&&c("*").prop("unselectable",!0)}),G)w.on("touchstart",function(a){a.preventDefault();a.stopPropagation();C(a.originalEvent,c(this),null);n=!0})}else"double"===b.type&&(f.append(k),m=f.find(".from"),q=f.find(".to"),Q=f.find(".irs-diapason"),K(),m.on("mousedown",function(a){a.preventDefault();a.stopPropagation();c(this).addClass("last");q.removeClass("last");C(a,c(this),"from");z=n=!0;B&&
c("*").prop("unselectable",!0)}),q.on("mousedown",function(a){a.preventDefault();a.stopPropagation();c(this).addClass("last");m.removeClass("last");C(a,c(this),"to");z=n=!0;B&&c("*").prop("unselectable",!0)}),G&&(m.on("touchstart",function(a){a.preventDefault();a.stopPropagation();c(this).addClass("last");q.removeClass("last");C(a.originalEvent,c(this),"from");z=n=!0}),q.on("touchstart",function(a){a.preventDefault();a.stopPropagation();c(this).addClass("last");m.removeClass("last");C(a.originalEvent,
c(this),"to");z=n=!0})),b.to===b.max&&m.addClass("last"));D.on("mouseup",function(){n&&(n=z=!1,u.removeAttr("id"),u=null,"double"===b.type&&K(),P(),B&&c("*").prop("unselectable",!1))});D.on("mousemove",function(a){n&&(R=a.pageX,X())});G&&(F.on("touchend",function(){n&&(n=z=!1,u.removeAttr("id"),u=null,"double"===b.type&&K(),P())}),F.on("touchmove",function(a){n&&(R=a.originalEvent.pageX,X())}));Y();var a={fromNumber:b.from,toNumber:b.to,fromPers:0,toPers:0,fromX:0,toX:0},e=b.max-b.min;"single"===
b.type?(a.fromPers=100*((a.fromNumber-b.min)/e),a.fromX=Math.round(A/100*a.fromPers),w[0].style.left=a.fromX+"px"):"double"===b.type&&(a.fromPers=100*((a.fromNumber-b.min)/e),a.fromX=Math.round(A/100*a.fromPers),m[0].style.left=a.fromX+"px",a.toPers=100*((a.toNumber-b.min)/e),a.toX=Math.round(A/100*a.toPers),q[0].style.left=a.toX+"px",K());g=a;Z();if(b.hasGrid){v.addClass("irs-with-grid");for(var a=0,e="",d=0,d=0,r="",a=0;20>=a;a++)d=Math.floor(j/20*a),d>=j&&(d=j-1),r+='<span class="irs-grid-pol small" style="left: '+
d+'px;"></span>';for(a=0;4>=a;a++)d=Math.floor(j/4*a),d>=j&&(d=j-1),r+='<span class="irs-grid-pol" style="left: '+d+'px;"></span>',e=Math.round(b.min+(b.max-b.min)/4*a),e=Math.round(e/b.step)*b.step,e=s(e),0===a?r+='<span class="irs-grid-text" style="left: '+d+'px; text-align: left;">'+e+"</span>":4===a?(d-=100,r+='<span class="irs-grid-text" style="left: '+d+'px; text-align: right;">'+e+"</span>"):(d-=50,r+='<span class="irs-grid-text" style="left: '+d+'px;">'+e+"</span>");U.html(r)}},Y=function(){j=
f.width();J=w?w.width():m.width();A=j-J},C=function(a,e,d){Y();u=e;u.attr("id","irs-active-slider");e=u.offset().left;V=e+(a.pageX-e)-u.position().left;"single"===b.type?S=f.width()-J:"double"===b.type&&("from"===d?(N=0,O=parseInt(q.css("left"))):(N=parseInt(m.css("left")),O=f.width()-J))},K=function(){var a=m.width(),b=parseInt(m[0].style.left)||m.position().left,d=(parseInt(q[0].style.left)||q.position().left)-b;Q[0].style.left=b+a/2+"px";Q[0].style.width=d+"px"},X=function(){var a=Math.round(R-
V);"single"===b.type?(0>a&&(a=0),a>S&&(a=S),P()):"double"===b.type&&(a<N&&(a=N),a>O&&(a=O),P(),K());u[0].style.left=a+"px"},P=function(){var a={fromNumber:0,toNumber:0,fromPers:0,toPers:0,fromX:0,toX:0},e=b.max-b.min,d;"single"===b.type?(a.fromX=parseInt(w[0].style.left)||w.position().left,a.fromPers=100*(a.fromX/A),d=e/100*a.fromPers+parseInt(b.min),a.fromNumber=Math.round(d/b.step)*b.step):"double"===b.type&&(a.fromX=parseInt(m[0].style.left)||m.position().left,a.fromPers=100*(a.fromX/A),d=e/100*
a.fromPers+parseInt(b.min),a.fromNumber=Math.round(d/b.step)*b.step,a.toX=parseInt(q[0].style.left)||q.position().left,a.toPers=100*(a.toX/A),e=e/100*a.toPers+parseInt(b.min),a.toNumber=Math.round(e/b.step)*b.step);g=a;Z()},Z=function(){var a,e,d,c,f,h;h=J/2;"single"===b.type?(x[0].style.display="none",y[0].style.display="none",d=s(g.fromNumber)+b.postfix,t.html(d),f=t.outerWidth(),h=g.fromX-f/2+h,0>h&&(h=0),h>j-f&&(h=j-f),t[0].style.left=h+"px",H[0].style.display=h<L?"none":"block",I[0].style.display=
h+f>j-M?"none":"block",l.attr("value",parseInt(g.fromNumber))):"double"===b.type&&(a=s(g.fromNumber)+b.postfix,e=s(g.toNumber)+b.postfix,d=g.fromNumber!=g.toNumber?s(g.fromNumber)+" \u2014 "+s(g.toNumber)+b.postfix:s(g.fromNumber)+b.postfix,x.html(a),y.html(e),t.html(d),a=x.outerWidth(),e=g.fromX-a/2+h,0>e&&(e=0),e>j-a&&(e=j-a),x[0].style.left=e+"px",d=y.outerWidth(),c=g.toX-d/2+h,0>c&&(c=0),c>j-d&&(c=j-d),y[0].style.left=c+"px",f=t.outerWidth(),h=g.fromX+(g.toX-g.fromX)/2-f/2+h,0>h&&(h=0),h>j-f&&
(h=j-f),t[0].style.left=h+"px",e+a<c?(t[0].style.display="none",x[0].style.display="block",y[0].style.display="block"):(t[0].style.display="block",x[0].style.display="none",y[0].style.display="none"),H[0].style.display=h<L||e<L?"none":"block",I[0].style.display=h+f>j-M||c+d>j-M?"none":"block",l.attr("value",parseInt(g.fromNumber)+";"+parseInt(g.toNumber)));"function"==typeof b.onChange&&b.onChange.call(this,g);"function"==typeof b.onFinish&&!1===z&&b.onFinish.call(this,g)};W()}})},update:function(c){return this.each(function(){this.updateData(c)})},
remove:function(){return this.each(function(){this.removeSlider()})}};c.fn.ionRangeSlider=function(k){if(D[k])return D[k].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof k||!k)return D.init.apply(this,arguments);c.error("Method "+k+" does not exist for jQuery.ionRangeSlider")}})(jQuery);